<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Currency chart</title>

		<link rel="stylesheet" type="text/css" href="style.css" />

		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

	</head>
	<body>
		<svg width="800px" height="600px" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg" version="1.1">
			<line x1="1" y1="300" x2="799" y2="300" fill="none" stroke="#CCC" stroke-width="1" />
			<line x1="10" y1="1" x2="10" y2="799" stroke="#CCC" stroke-width="1" />
			<polyline id="chart" fill="none" stroke="blue" stroke-width="1" 
				points="10,300 14,300 18,300 22,300 26,300 30,300 34,300 38,300 42,300 46,300 50,300 54,300 58,300 62,300 66,300 70,300 74,300 78,300 82,300 86,300 90,300 94,300 98,300 102,300 106,300 110,300 114,300 118,300 122,300 126,300 130,300 134,300 138,300 142,300 146,300 150,300 154,300 158,300 162,300 166,300 170,300 174,300 178,300 182,300 186,300 190,300 194,300 198,300 202,300 206,300 210,300 214,300 218,300 222,300 226,300 230,300 234,300 238,300 242,300 246,300 250,300 254,300 258,300 262,300 266,300 270,300 274,300 278,300 282,300 286,300 290,300 294,300 298,300 302,300 306,300 310,300 314,300 318,300 322,300 326,300 330,300 334,300 338,300 342,300 346,300 350,300 354,300 358,300 362,300 366,300 370,300 374,300 378,300 382,300 386,300 390,300 394,300 398,300 402,300 406,300 410,300 414,300 418,300 422,300 426,300 430,300 434,300 438,300 442,300 446,300 450,300 454,300 458,300 462,300 466,300 470,300 474,300 478,300 482,300 486,300 490,300 494,300 498,300 502,300 506,300 510,300 514,300 518,300 522,300 526,300 530,300 534,300 538,300 542,300 546,300 550,300 554,300 558,300 562,300 566,300 570,300 574,300 578,300 582,300 586,300 590,300 594,300 598,300 602,300 606,300 610,300 614,300 618,300 622,300 626,300 630,300 634,300 638,300 642,300 646,300 650,300 654,300 658,300 662,300 666,300 670,300 674,300 678,300 682,300 686,300 690,300 694,300 698,300 702,300 706,300 710,300 714,300 718,300 722,300 726,300 730,300 734,300 738,300 742,300 746,300 750,300 754,300 758,300 762,300 766,300 770,300 774,300 778,300 782,300 786,300" />
		</svg>
	</body>

	<script>
		var intervalEl;	// Interval identifier
		
		$(document).ready(function() {
			intervalEl = setInterval(update, 1000);
		});

		// Update chart
		function update() {
			var d = new Date();
			var s = d.getTime();
			$.getJSON('ajax.php?'+s, function(data) {
				
				if (data.length) {					
					var coords = $('#chart')[0].points;
					
					for (var i=0; i<data.length; i++) {
						var c = coords.getItem(i);
						c.x = data[i][0];
						c.y = data[i][1];
					}
					//$('#chart')[0].setAttribute("fill-opacity", "0.1");
				}
				else {
					clearInterval(intervalEl);
					alert('No data!');
				}
			});
		}
</script>

</html>